<style>
    #ouibounce-modal {
      	display: none;  
    }
  
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.4);
        background: 	url(data:;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNUmK/OAAAAATSURBVBhXY2RgYNgHxGAAYuwDAA78AjwwRoQYAAAAAElFTkSuQmCC) repeat fixed transparent\9;
        z-index: 9998;
        color: #fff;
        transition: opacity 500ms;
    }
  
    .content h2 {
        font-size: 17pt;
        color: #777;
    }

    .popup {
        margin: 0px;
        padding: 20px;
        z-index: 9999;    
        padding-bottom: 0px;
        text-align: left;
        height: 450px;
        background: #fff;
        border-radius: 5px;
        width: 700px;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        color: #000;
    }

    .popup .closePopupCross {
        position: absolute;
        top: 20px;
        right: 30px;
        transition: all 200ms;
        font-size: 30px;
        font-weight: bold;
        text-decoration: none;
        color: #333;
    }
  
    .form-group {
    	padding-top: 20px;    
    }
  
    .help-block {
    	font-size: 10pt;
    	color: #C71585;
    }
  
    .popup .closePopupLink {
	font-size: 11pt;
    	color: #aaa;
    	margin-left: 30px;
    }  
  
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ouibounce/0.0.11/ouibounce.min.js"></script>

<script>
    
$(document).ready(function() {
    
        $('body').prepend('<div id="ouibounce-modal"><div class="overlay"></div><div class="popup"><a class="closePopupCross" href="#">Ã—</a><div class="content"><h2>Want to stay in touch with new updates?</h2>Fill out the form to subscribe to my newsletter!<form action="/progress.php" method="POST" id="newsletter_popup"><div id="name-group" class="form-group"><label for="name">Name</label><input type="text" class="form-control" name="name" placeholder="Your name"></div><div id="email-group" class="form-group"><label for="email">Email</label><input type="text" class="form-control" name="email" placeholder="mail@example.com"></div><br/><button type="submit" class="">Sign up</button> <a class="closePopupLink" href="#">No thanks!</a></form></div></div></div>');

        $('.closePopupLink, .closeLeavePage, .overlay').click(function() {
            $('.overlay, .popup').fadeOut(500);
        });
  
        $('#newsletter_popup').submit(function(event) {

              $('.form-group').removeClass('has-error');
              $('.help-block').remove();

              var formData = {
                  'name' 				: $('input[name=name]').val(),
                  'email' 				: $('input[name=email]').val()
              };

              jQuery.ajax({
                  type 			: 'POST',
                  url 			: '/progress.php',
                  data 			: formData,
                  dataType 		: 'json',
                  encode 		: true,
                  async 		: true
              })
              .done(function(data) 
              {
                  console.log(data); 

                  if(!data.success) 
                  {					
                      if(data.errors.name) 
                      {
                          $('#name-group').addClass('has-error');
                          $('#name-group').append('<div class="help-block">' + data.errors.name + '</div>');
                      }

                      if(data.errors.email) 
                      {
                          $('#email-group').addClass('has-error');
                          $('#email-group').append('<div class="help-block">' + data.errors.email + '</div>');
                      }
                  } 
                  else 
                  {
                      $('#newsletter_popup').append('<div class="alert alert-success">' + data.message + '</div>');
                      //window.location = '/thank-you';
                  }
              })
              .fail(function(data) {
                  console.log(data);
              });

              event.preventDefault();
        });
  
        var _ouibounce = ouibounce(document.getElementById('ouibounce-modal'), {
        	aggressive: true,
        	timer: 0,
        	callback: function() { console.log('ouibounce fired!'); }
      	});
});

</script>